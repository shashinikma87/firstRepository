<template>
    <lightning-card icon-name="standard:case" title="Demand Masters">

		<lightning-button label="New" slot="actions" class="slds-m-left_x-small" title="Non-primary action"
			onclick={handleCreateNew} variant="brand-outline">
		</lightning-button>
		<lightning-button label="Total Daily Deliver GP" slot="actions" class="slds-m-left_x-small"
			title="Non-primary action" onclick={calculateTotalDailyDelGP} variant="brand-outline">
		</lightning-button>
		<lightning-button label="Submit for Approval" slot="actions" class="slds-m-left_x-small" variant="brand-outline"
			onclick={openModal}>
		</lightning-button>


		<div class="slds-grid  slds-form-element slds-form-element_horizontal">
			<div class="slds-col slds-size_4-of-8">
				<div><span class="countSortedByFilteredBy" aria-live="polite" role="status" aria-label="All">
			• {recSize} items • Filtered by - IBM Delivery Lead : <b>{ibmDeliveryLead}</b>, Solution Identifier :<b> {solIdentifier}</b> </span>
				</div>
			</div>
			<div class="slds-col slds-size_4-of-8">
				<div class="filterClass">
					<lightning-input type="search" value={searchKey} class="slds-m-left_x-small search-case"
						onchange={handleSearch} placeholder="Search Case Number">
					</lightning-input><br>

					<lightning-button-icon icon-name="utility:filterList" variant="border-filled"
						alternative-text="Add Filter" class="slds-m-left_xx-small" title="Add Filter"
						onclick={onClickFilter}>
					</lightning-button-icon>

					<lightning-button-icon icon-name="utility:filter" variant="border-filled"
						alternative-text="Add/Remove Columns" class="slds-m-left_xx-small" title="Add/Remove Columns"
						onclick={onClickOpenColumnFilter}>
					</lightning-button-icon>

				</div>
			</div>
		</div>

		<p> Selected Values: {fieldValue}</p>

		<div class="myTable" style="height: 450px;">
			<lightning-datatable class="slds-table_header-fixed_container slds-scrollable_x slds-border_top "
				key-field="Id" data={records} show-row-number-column row-number-offset={rowOffset}
				onrowselection={getSelectedRecord} sorted-by={sortBy} sorted-direction={sortDirection}
				onsort={doSorting} columns={columns} onsave={handleSave} draft-values={draftValues}
				onrowaction={handleRowAction}>

			</lightning-datatable>
		</div>


		<!-- Modal popup for displaying Filter -->
		<template if:true={isFilterOpen}>
			<!-- Modal/Popup Box LWC starts here -->
			<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
				aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
				<div class="slds-modal__container filter-modal">

					<!-- Modal/Popup Box LWC header here -->
					<header class="slds-modal__header">
						<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
							<lightning-icon icon-name="utility:close"
								alternative-text="close"
								variant="inverse"
								size="small" ></lightning-icon>
							<span class="slds-assistive-text">Close</span>
            			</button>
						<h2 id="filter-heading-01" class="slds-text-heading_medium slds-hyphenate">
							Filters
						</h2>
					</header>


					<!-- Modal/Popup Box LWC body starts here -->
					<div class="slds-modal__content slds-p-around_medium slds-grid  slds-grid_vertical"
						id="filter-content-id-1">

						<div class="slds-col">
							<lightning-input type="text" value={solIdentifierModalVar}
								class="slds-m-left_x-small sol-Identifier2" onchange={handleInputSolId}
								placeholder="Enter Solution Identifier" label="Solution Identifier">
							</lightning-input><br>
						</div>
							<div class="slds-col">
								<lightning-input type="text" value={ibmDeliveryLeadModalVar}
									class="slds-m-left_x-small delivery-Lead2" onchange={handleInputIBMDelLead}
									placeholder="Enter IBM Delivery Lead" label="IBM Delivery Lead">
								</lightning-input><br>
						</div>

						<div class="slds-col">
							<lightning-button label="Apply Filter" slot="actions"
								class="slds-m-left_x-small search-btn2" variant="brand-outline"
								onclick={onBeforeClickSearch}>
							</lightning-button>

							<lightning-button label="Clear Filter" slot="actions"
								class="slds-m-left_x-small search-btn2" variant="brand-outline"
								onclick={onClearFilterClick}>
							</lightning-button>
						</div>
					</div>

					<!-- Modal/Popup Box LWC footer starts here -->
					<footer class="slds-modal__footer">
						<button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
					</footer>

				</div>
			</section>
			<div class="slds-backdrop slds-backdrop_open"></div>
		</template>


		<!-- Modal popup for displaying Total Daily Deliver GP -->
		<template if:true={isGPModalOpen}>
			<!-- Modal/Popup Box LWC starts here -->
			<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
				aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
				<div class="slds-modal__container">

					<!-- Modal/Popup Box LWC header here -->
					<header class="slds-modal__header">
						<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
							<lightning-icon icon-name="utility:close"
								alternative-text="close"
								variant="inverse"
								size="small" ></lightning-icon>
							<span class="slds-assistive-text">Close</span>
            			</button>
						<h2 id="GPmodal-heading-01" class="slds-text-heading_medium slds-hyphenate">Total Daily Deliver
							GP
						</h2>
					</header>

					<!-- Modal/Popup Box LWC body starts here -->
					<div class="slds-modal__content slds-p-around_medium" id="GPmodal-content-id-1">
						<p><b>
							{message}
						</b></p>
					</div>

					<!-- Modal/Popup Box LWC footer starts here -->
					<footer class="slds-modal__footer">
						<button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
					</footer>

				</div>
			</section>
			<div class="slds-backdrop slds-backdrop_open"></div>
		</template>


		<!-- Modal popup to Submit for Approval -->
		<template if:true={isModalOpen}>
			<!-- Modal/Popup Box LWC starts here -->
			<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
				aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
				<div class="slds-modal__container">
					<!-- Modal/Popup Box LWC header here -->
					<header class="slds-modal__header">
						<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                <lightning-icon icon-name="utility:close"
                    alternative-text="close"
                    variant="inverse"
                    size="small" ></lightning-icon>
                <span class="slds-assistive-text">Close</span>
            </button>
					<h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Submit for Approval</h2>
					</header>
					<!-- Modal/Popup Box LWC body starts here -->
					<div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
						<p><b>
                <lightning-textarea class="slds-p-top_small" data-id="commentsData" label="Comments" ></lightning-textarea>
            </b></p>
				</div>
					<!-- Modal/Popup Box LWC footer starts here -->
					<footer class="slds-modal__footer">
						<button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
						<button class="slds-button slds-button_brand" onclick={submitDetails} title="Submit">Submit</button>
					</footer>
				</div>
			</section>
			<div class="slds-backdrop slds-backdrop_open"></div>
		</template>


		<!-- Modal/Popup for List View Coulmn Selection  -->
		<template if:true={isColumnFilterOpen}>
			<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-04" aria-modal="true"
				aria-describedby="modal-content-id-4" class="slds-modal slds-fade-in-open">
				<div class="slds-modal__container filter-modal">

					<!-- Modal/Popup Box LWC header here -->
					<header class="slds-modal__header">
						<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
							<lightning-icon icon-name="utility:close"
								alternative-text="close"
								variant="inverse"
								size="small" ></lightning-icon>
							<span class="slds-assistive-text">Close</span>
            			</button>
						<h2 id="filter-heading-04" class="slds-text-heading_medium slds-hyphenate">
							Select Columns
						</h2>
					</header>


					<!-- Modal/Popup Box LWC body starts here -->
					<div class="slds-modal__content slds-p-around_medium slds-grid  slds-grid_vertical"
						id="filter-content-id-4">
						<!-- onmultipicklistgenericevent={multipicklistgenericevent}  -->
						<c-multi-pick-list-generic-component received-pick-list-values={pickListValues}
							onsaveevent={onsavefromchild} selected-values={fieldValue}
							field-api-name="Company_Category__c">
						</c-multi-pick-list-generic-component>
					</div>


					<!-- Modal/Popup Box LWC footer starts here -->
					<footer class="slds-modal__footer">
						<button class="slds-button slds-button_neutral" onclick={closeModal} title="Cancel">Cancel</button>
					</footer>

				</div>
			</section>
			<div class="slds-backdrop slds-backdrop_open"></div>
		</template>
		



	</lightning-card>
</template>